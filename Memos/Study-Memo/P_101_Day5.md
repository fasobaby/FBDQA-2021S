# 20210326

## 量化交易部分4 量化交易策略的开发案例

### 02 股票池择时策略的细节完善

首先构建长期有效的股票池。
择时信号：20分钟？一般交易软件上没有这项数据，回避普遍的追涨杀跌。

不建议完善择时信号。资金管理符合个性目标。

选股条件如何确定：多因子模型的量化结构。
PE=E/P。股价/每股盈利。数据连续性。在0附近跳跃不利于数据处理。PB同理。
调整因子权重。可以机器学习，可以经验分配。
因子评分。得分排序。

### 03 均值回复性策略

认为涨多了必跌，高抛低吸。做多表现最差组合，做空表现最好组合。
做空：融券卖出，融券成本年化8-10%，因此不是稳赚10%以上不要做空，长期不要做空。

长期市场反转逻辑：类似赌输后加注以保证总体为赚，但是无限弹药模式。可能活不到赚的那一天。

缺口方式：k线价格不连续造成。A股缺口必补。

### 04 海龟代码分析

TB：适合于商品期货，提供不同级别的均线，回撤方便。

### 05 如何检验一个策略

收益率的标准差定义为风险STDEV.P，STDEV，差别在是否视为抽样。
夏普比率：风险和收益的平衡。投资组合每承受一单位总风险，产生多少超额报酬。总收益/总风险。
$$
SharpeRatio=\frac{E(R_p)-R_f}{\sigma_p}
$$
$E(R_p)$投资组合预期报酬率，$R_f$无风险利率，$\sigma_p$投资组合超额收益的标准差。

最大回撤：最坏的情况，要和年化收益相匹配。

信息率=主动收益/主动风险。信息率用来衡量投资经理的主动投资能力，>0.5合格，>1优秀。

## 金融数据访问

### SQL语言练习

本地数据访问PyTables
云端数据访问：服务器端。过去Flat File带索引的文件，现在关系型数据库（RDBMS）为主，还有数据立方（Data Cube）。
SQL结构化查询语言，事实标准，实现数据无关性/数据独立性。
SQLite本地数据库。
交易型数据：面向大数据（多台数据库集群）。PostgreSQL(pg)和其上的Greenplum(gp)

### SQL实践路线

集合代数Set algebra
set一个只能出现一次，不要求顺序。多级multiset可以重复。
交叉积

%任何字符串序列，包括0。_任何可能的单个字母。

JOINs连接，多张表多级合并。内连接和外连接。