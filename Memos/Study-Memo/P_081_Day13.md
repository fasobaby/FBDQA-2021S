### 量化策略的深入诊断

**一、量化策略开发的基本流程**

1. 基于三类数据：

   1. 宏观经济环境数据：经济周期，经济指标，基础利率，CPI,PPI
   2. 行业与公司基本面：财报，分析师研报，大宗商品板块，产业链
   3. 市场交易数据：宏观数据，微观数据，流动性分析，机构结构

2. 四个步骤：策略建模 - 追溯测试（绩效评估） - 修正错误（系统测试风险管理） - 自动化操作

3. 技术支持：告诉通信通道，托管机房，网络架构，期货接口（高速飞马/一般CTP)

4. 数据处理：数据收集，数据校验，数据比对，数据清洗，数据对齐，管理配置

   ​	数据对齐：确定主力数据，对齐不同数据的传输和接收时间。（用主力数据回对“提早”来的次要数据

**二、基于回测结果对策略的反思**

1. 回测虚高的原因：
   1. 年化计算有BUG
   2. 回测周期太短，赶上同期大盘好
   3. 回测周期恰好碰到大牛股
   4. 过度拟合，只适用于某阶段
   5. 使用了未来函数
2. 关于回测反思的参考
   1. 年化收益20%，最大回撤 6%是很好的策略。但很多大资金量的机构仍承担不起这样的回撤，2%的最大回撤带10%的年化收益率已经被抢疯了（类固收）
   2. 偶然性影响：第三方平台的不可信，黑箱（数据、接口等全未知
3. 关于策略的反思
   1. 回测是否具有有统计意义（成交次数复盘）
   2. 是否违背了交易规则（临时停牌）
   3. 是否出现流动性短缺时的成交（涨跌停，成交量为0的时段注意不能改写历史）
   4. 是否考虑了流动性对成交量的影响（单笔成交量占当日成交量占比不能过大）
   5. 是否理想化的使用了价格（以开收盘价？精准的高买高卖？）
   6. 是否存在偶然性影响

**三、策略逻辑的隐蔽漏洞：未来函数**

EX1：已知十天前的一次大涨，用相应的参数制造函数（未来改变历史）

EX2：果仁平台的“基金重仓指标” - 后验指标（和重仓的基金同时入场，而这实际上是等基金季报发布后才知道的指标

EX3：事件驱动型：资产重组的公告往往在下午四点后（港股也收盘了）才发布，不可能用这个消息来进行当天的交易，而此后股票就停牌了。

**未来函数只会给实战带来损失**

*大作业注意抽查公司财务指标*

自检手册：信息率>1，翻盘年数<0.5

### 金融大数据部分

1. 正态性检验

2. 投资组合优化

   （直接通过复盘代码进行复习）
