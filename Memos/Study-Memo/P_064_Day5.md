金融大数据与量化分析 Lecture 5
课堂笔记
孙泽宇 北京大学1700012772 清华临时学号P20243023 课堂编号064

### 第一部分 量化策略
#### 1.1 量化策略的完善
量化策略的基础是股票池和择时。相比较之下，择时的意义没有股票池的意义大，只在市场几句震荡时才有意义。即使不择时，也可以获取超额收益。
股票池的常见设计思路：市值因子、估值因子、超跌因子、ST股票处理。
超跌因子：剔除市值最小的10%，PE小于0或者大于100，ST股票后，选择前25日跌幅在前10%的股票作为股票池，再平衡周期为25个交易日。(选择剔除策略的原因：一些指标无法选择更好的股票，但可以剔除更差的)
一般上线策略以交易日作为交易逻辑时间级别，短线交易以分钟作为交易逻辑时间级别。
策略检验的因素：是否抓到趋势？是否锁定收益/及时止损？信号是否太慢或者不准？
量化策略获取超额收益的正道是：**资金管理和风险控制**
对因子的特殊处理：从PE到EP(每股盈利在0附近有剧烈的跳变，不是用作量化指标，可以倒数)，从PB到BP同理。
**综合加权排序法**：先按照大类分100%的权重，再对大类按照类内的因子分权重。
#### 1.2 均值回复型策略
市场的走势是震荡还是趋势取决于观察的时间尺度，趋势跟随型策略和均值回复型策略都有一定的合理性。
均值回复原理的简单应用：短期市场的翻转逻辑。以过去3个月表现最差的N支股票作为股票池构成投资组合，再平衡周期为1个月。头寸管理方式：所有的股票均均匀建仓，按照市值加权。如果做长期市场的翻转逻辑，可以将再平衡周期延长到1年，并且可以对表现最好的N支股票做空。
策略的优化方向：尺度量价、缺口方式、套利模式。
跳空：当日开盘跳空，但没有跌破20日均线，则很有可能是虚假的负面消息影响了市场情绪，此时可以买入。该策略只在美股市场有效。
#### 1.3 量化策略的检验
对风险的定义：收益的标准差(STDEV.P或STDEV)
标准差的特点：风险分散化可以降低标准差。
$$\sigma_P=\sqrt{(0.5\sigma_1)^2+(0.5\sigma_2)^2+2(0.5\sigma_1)(0.5\sigma_2)\rho_{12}}$$
仅当相关系数$$\rho_{12}=1$$即两支股票完全相关时，等号成立。
以日作为交易单位的策略，需要年化风险，即年标准差=$$\sqrt{245}$$日标准差(按照每年245个交易日计算)
两个最重要的风险收益评价指标
夏普比例：$$Sharpe Ratio=\frac{E(R_p)-R_f}{\rho_p}$$
最大回撤：最坏的情况下的损失，需要和年化收益相匹配。
也可以用信息率在衡量基金经理的水平。$$IR=\frac{\alpha}{w}=\frac{主动收益}{主动风险}$$，信息率意味着主动承担相对于投资基准组合的风险敞口，带来了多少超额收益。一般0.5为合格线，1为优秀线。

### 第二部分 金融数据访问
主要分为本地数据访问(文件读取)和云端数据访问(网络访问)
数据系统是交易系统的基础，但来源多样，格式不一，质量存在差异，因此需要先对数据进行清洗和修正。
传统的数据访问方式：使用Flat File带索引的文件。
现在的数据方式方式：通用的数据库形式，主要是关系型数据库(RDBMS)
SQL语言的主要目的：实现数据无关性(data independence)，分为逻辑数据无关性和物理数据无关性。
SQL的数学基础是集合代数multiset，这是一种无顺序的列表，允许出现重复的元素。
SQL中虽重要的操作是交叉积(cross product)。
SQL语言不区分命令符的大小写，但区分字符串常量的大小写。
select \* from \* where string="abc"
其中的select可以换成SELECT，但"abc"不能换成"ABC"